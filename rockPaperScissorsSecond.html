<!DOCTYPE html>

<body>
<h1>This is the second attempt at Rock Paper Scissors. Open Console to see contents.</h1>
</body>

<script>

function computerPlay() { 
    switch (Math.floor(Math.random() * 3)) {
    case 0: return "rock"
    case 1: return "paper"
    case 2: return "scissors";
    }
};

function playerPlay() {
    let playerChoice = prompt("Rock, paper or scissors?");
    if (playerChoice == "Rock" ||
             playerChoice == "Paper" ||
             playerChoice == "Scissors") {
                 return playerChoice.toLowerCase()
             }
    else if (playerChoice != "rock" &&
        playerChoice != "paper" &&
        playerChoice != "scissors" ||
        playerChoice == null) {
            let playerChoice = computerPlay();
            alert ("Your answer was either null or not rock/paper/scissors, so we picked " + 
            playerChoice + " for you.")
            return playerChoice;
        }
    return playerChoice
}

function playRound(playerSelection,computerSelection) {  
    switch(playerSelection) {
        case "rock":
            switch(computerSelection) {
                case "rock": return ["Tie, rock equals rock", 0]
                break;
                case "paper": return ["You lose, paper beats rock", 0]
                break;
                case "scissors": return ["You win, rock beats scissors", +1]
            }
        case "paper": 
            switch(computerSelection) {
                case "rock": return ["You win, paper beats rock", +1]
                break;
                case "paper": return ["Tie, paper equals paper", 0]
                break;
                case "scissors": return ["You lose, scissors beats paper", 0]
            }
        case "scissors":
            switch(computerSelection) {
                case "rock": return ["You lose, rock beats scissors", 0]
                break;
                case "paper": return ["You win, scissors beats paper", +1]
                break;
                case "scissors": return ["Tie, scissors equals scissors", 0]
            }
    }    
};

let score = 0;
for (i = 0; i < 5; i++) {
    const playerSelection = playerPlay();
    const computerSelection = computerPlay();
    let points = playRound(playerSelection,computerSelection)[1]
    score += points;
    
    console.log(playRound(playerSelection,computerSelection)[0]);
    
} 

if (score <= 2) {
    console.log("Your final score is " + score + ", you lose")
} else console.log("Your final score is " + score + ", you win")




</script>